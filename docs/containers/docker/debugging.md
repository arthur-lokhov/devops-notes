# üêõ –û—Ç–ª–∞–¥–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–î–∞–∂–µ –ø—Ä–∏ –∏–¥–µ–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –º–æ–≥—É—Ç –≤–µ—Å—Ç–∏ —Å–µ–±—è –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ. –û—Ç–ª–∞–¥–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ‚Äî –∫–ª—é—á–µ–≤—ã–µ –Ω–∞–≤—ã–∫–∏ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –í —ç—Ç–æ–π –≥–ª–∞–≤–µ —Å–æ–±—Ä–∞–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –ø–æ–¥—Ö–æ–¥—ã.

---

## üî¨ –ë–∞–∑–æ–≤–∞—è –∏–Ω—Å–ø–µ–∫—Ü–∏—è

–≠—Ç–∏ –∫–æ–º–∞–Ω–¥—ã ‚Äî –≤–∞—à –ø–µ—Ä–≤—ã–π —à–∞–≥ –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –ø—Ä–æ–±–ª–µ–º.

### `docker logs`

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –≤—ã–≤–æ–¥–∞ (`STDOUT`/`STDERR`) –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

```bash
# –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker logs -f my-container

# –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫
docker logs --tail 50 my-container

# –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
docker logs -t my-container
```

### `docker inspect`

–í—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON: –µ–≥–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é, —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —Å–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–º–∞ –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ.

```bash
# –ü–æ–ª—É—á–∏—Ç—å –≤—Å—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
docker inspect my-container

# –ò–∑–≤–ª–µ—á—å —Ç–æ–ª—å–∫–æ IP-–∞–¥—Ä–µ—Å —Å –ø–æ–º–æ—â—å—é Go-—à–∞–±–ª–æ–Ω–∞
docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' my-container
```

### `docker exec`

–í—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –≤–Ω—É—Ç—Ä–∏ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è "–≤—Ö–æ–¥–∞" –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –∞–Ω–∞–ª–∏–∑–∞ –µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑–Ω—É—Ç—Ä–∏.

```bash
# –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –æ–±–æ–ª–æ—á–∫—É
docker exec -it my-container /bin/sh

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker exec my-container ps aux
```

### `docker diff`

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –µ–≥–æ –æ–±—Ä–∞–∑–æ–º. –ü–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã, –∏–∑–º–µ–Ω–µ–Ω—ã –∏–ª–∏ —É–¥–∞–ª–µ–Ω—ã –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã.

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
docker diff my-container
# –í—ã–≤–æ–¥:
# C /app
# A /app/new-file.txt
# D /app/old-file.log
```

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### `docker stats`

–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞, –∫–æ—Ç–æ—Ä–∞—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ CPU, –ø–∞–º—è—Ç–∏, —Å–µ—Ç–µ–≤–æ–≥–æ I/O –∏ –¥–∏—Å–∫–æ–≤–æ–≥–æ I/O –¥–ª—è –≤—Å–µ—Ö –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –≤—Å–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker stats

# –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–Ω—ã–µ
docker stats web-server db
```

### `ctop`

–°—Ç–æ—Ä–æ–Ω–Ω–∏–π TUI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –ø–æ—Ö–æ–∂–∏–π –Ω–∞ `top`, –Ω–æ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–æ–ª–µ–µ —É–¥–æ–±–Ω—ã–π –∏ –Ω–∞–≥–ª—è–¥–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.

```bash
# –ó–∞–ø—É—Å–∫ ctop –≤ –≤–∏–¥–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run --rm -ti \
  --name=ctop \
  -v /var/run/docker.sock:/var/run/docker.sock:ro \
  quay.io/vektorlab/ctop:latest
```

### cAdvisor

**cAdvisor (Container Advisor)** –æ—Ç Google ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å–±–æ—Ä–∞, –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ –æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤, –∫–æ—Ç–æ—Ä–∞—è –≥–æ—Ä–∞–∑–¥–æ –ø–æ–¥—Ä–æ–±–Ω–µ–µ, —á–µ–º —É `docker stats`.

cAdvisor –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–∏—Å—Ç–µ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, —Ç–∞–∫–∏—Ö –∫–∞–∫ Prometheus.

```bash
# –ó–∞–ø—É—Å–∫ cAdvisor –≤ –≤–∏–¥–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run \
  --volume=/:/rootfs:ro \
  --volume=/var/run:/var/run:ro \
  --volume=/sys:/sys:ro \
  --volume=/var/lib/docker/:/var/lib/docker:ro \
  --volume=/dev/disk/:/dev/disk:ro \
  --publish=8080:8080 \
  --detach=true \
  --name=cadvisor \
  gcr.io/cadvisor/cadvisor:latest
```
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `http://<host-ip>:8080`.

---

## üåê –°–µ—Ç–µ–≤–∞—è –æ—Ç–ª–∞–¥–∫–∞

### `nsenter`

–£—Ç–∏–ª–∏—Ç–∞, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –≤–æ–π—Ç–∏ –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º–µ–Ω (namespace) –¥—Ä—É–≥–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞, –≤–∫–ª—é—á–∞—è —Å–µ—Ç–µ–≤–æ–µ. –≠—Ç–æ –¥–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ—Ç–µ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã —Ö–æ—Å—Ç–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ —Å–µ—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∫–∞–∫ –µ—Å–ª–∏ –±—ã –≤—ã –Ω–∞—Ö–æ–¥–∏–ª–∏—Å—å –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ.

```bash
# 1. –ü–æ–ª—É—á–∞–µ–º PID –ø—Ä–æ—Ü–µ—Å—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
PID=$(docker inspect -f '{{.State.Pid}}' my-container)

# 2. –í—Ö–æ–¥–∏–º –≤ –µ–≥–æ —Å–µ—Ç–µ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º–µ–Ω –∏ –≤—ã–ø–æ–ª–Ω—è–µ–º –∫–æ–º–∞–Ω–¥—É
sudo nsenter -t $PID -n ip addr
```
–≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ, –µ—Å–ª–∏ –≤ –æ–±—Ä–∞–∑–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö —É—Ç–∏–ª–∏—Ç (`ip`, `ss`, `tcpdump`).

### `tcpdump` / `tshark`

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞. –ò—Ö –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å:

1.  **–ù–∞ —Ö–æ—Å—Ç–µ**, —Å–ª—É—à–∞—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `docker0` –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π `veth` –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
2.  **–í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**, –µ—Å–ª–∏ –æ–Ω–∏ —Ç–∞–º —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã.

```bash
# –ü—Ä–∏–º–µ—Ä: –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ 80 –ø–æ—Ä—Ç—É –Ω–∞ –º–æ—Å—Ç—É docker0
sudo tcpdump -i docker0 -n 'port 80'
```

---

## üìÇ –ê–Ω–∞–ª–∏–∑ –æ–±—Ä–∞–∑–æ–≤ –∏ —Å–ª–æ—ë–≤

### `dive`

*[`Dive`](https://github.com/wagoodman/dive)* ‚Äî —ç—Ç–æ TUI-—É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–ª–æ—ë–≤ Docker-–æ–±—Ä–∞–∑–∞. –û–Ω–∞ –ø–æ–º–æ–≥–∞–µ—Ç:
- –ù–∞–π—Ç–∏ "–º—É—Å–æ—Ä–Ω—ã–µ" —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç —Ä–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞.
- –ü–æ–Ω—è—Ç—å, –∫–∞–∫–∞—è –∫–æ–º–∞–Ω–¥–∞ –≤ `Dockerfile` –¥–æ–±–∞–≤–∏–ª–∞ —Ç–æ—Ç –∏–ª–∏ –∏–Ω–æ–π —Ñ–∞–π–ª.
- –û—Ü–µ–Ω–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫—ç—à–∞.

```bash
# –ê–Ω–∞–ª–∏–∑ –æ–±—Ä–∞–∑–∞
dive my-image:latest
```
–≠—Ç–æ –Ω–µ–∑–∞–º–µ–Ω–∏–º—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã Docker-–æ–±—Ä–∞–∑–æ–≤.
