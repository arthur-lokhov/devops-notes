---
title: üìä –ú–µ—Ç—Ä–∏–∫–∏
---

# üìä –ú–µ—Ç—Ä–∏–∫–∏

## ‚ú® –ó–æ–ª–æ—Ç—ã–µ —Å–∏–≥–Ω–∞–ª—ã

!!! abstract "–ß—Ç–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å?"

    –î–ª—è –ª—é–±–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ Google —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —á–µ—Ç—ã—Ä–µ –∫–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏, –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –∫–∞–∫ **¬´–ó–æ–ª–æ—Ç—ã–µ –°–∏–≥–Ω–∞–ª—ã¬ª**.

    –û–Ω–∏ –¥–∞—é—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ –∑–¥–æ—Ä–æ–≤—å–µ —Å–∏—Å—Ç–µ–º—ã —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

    ---

    #### üêå –ó–∞–¥–µ—Ä–∂–∫–∞

    *   **–ß—Ç–æ —ç—Ç–æ?** –í—Ä–µ–º—è, –∫–æ—Ç–æ—Ä–æ–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–∞—à–µ–º—É —Å–µ—Ä–≤–∏—Å—É –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞. –í–∞–∂–Ω–æ —Ä–∞–∑–¥–µ–ª—è—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –¥–ª—è —É—Å–ø–µ—à–Ω—ã—Ö –∏ –Ω–µ—É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.
    *   **–ù–∞ —á—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å?** –ù–µ —Ç–æ–ª—å–∫–æ –Ω–∞ —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –Ω–æ –∏ –Ω–∞ –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª–∏ (95-–π, 99-–π), —á—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞—Ç—å, –∫–∞–∫ —Å–µ–±—è —á—É–≤—Å—Ç–≤—É–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
    *   **–ü—Ä–∏–º–µ—Ä –º–µ—Ç—Ä–∏–∫–∏:** `http_request_duration_seconds{quantile="0.95"}` ‚Äî 95% –∑–∞–ø—Ä–æ—Å–æ–≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è.

    ---

    #### üìà –¢—Ä–∞—Ñ–∏–∫

    *   **–ß—Ç–æ —ç—Ç–æ?** –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–∏—Å, –∏–∑–º–µ—Ä—è–µ–º–∞—è –≤ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –µ–¥–∏–Ω–∏—Ü–∞—Ö. –î–ª—è –≤–µ–±-—Å–µ—Ä–≤–∏—Å–∞ —ç—Ç–æ –æ–±—ã—á–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É.
    *   **–ù–∞ —á—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å?** –ù–∞ –∞–Ω–æ–º–∞–ª—å–Ω—ã–µ –≤—Å–ø–ª–µ—Å–∫–∏ –∏–ª–∏ –ø–∞–¥–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö (DDoS-–∞—Ç–∞–∫–∞, —Å–±–æ–π —É –∫–ª–∏–µ–Ω—Ç–∞).
    *   **–ü—Ä–∏–º–µ—Ä –º–µ—Ç—Ä–∏–∫–∏:** `rate(http_requests_total[5m])` ‚Äî —Å—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –º–∏–Ω—É—Ç.

    ---

    #### üí• –û—à–∏–±–∫–∏

    *   **–ß—Ç–æ —ç—Ç–æ?** –ß–∞—Å—Ç–æ—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è –æ—à–∏–±–∫–æ–π. –û—à–∏–±–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —è–≤–Ω—ã–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, HTTP 500) –∏–ª–∏ –Ω–µ—è–≤–Ω—ã–º–∏ (HTTP 200, –Ω–æ —Å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º).
    *   **–ù–∞ —á—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å?** –ù–∞ —Ä–æ—Å—Ç —á–∞—Å—Ç–æ—Ç—ã –æ—à–∏–±–æ–∫. –í–∞–∂–Ω–æ –æ—Ç–ª–∏—á–∞—Ç—å –æ—à–∏–±–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ (5xx) –æ—Ç –æ—à–∏–±–æ–∫ –∫–ª–∏–µ–Ω—Ç–∞ (4xx), —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ —Ç—Ä–µ–±—É—é—Ç —Ä–∞–∑–Ω–æ–π —Ä–µ–∞–∫—Ü–∏–∏.
    *   **–ü—Ä–∏–º–µ—Ä –º–µ—Ç—Ä–∏–∫–∏:** `rate(http_requests_total{code=~"5.."}[5m])` ‚Äî —á–∞—Å—Ç–æ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –æ—à–∏–±–æ–∫ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –º–∏–Ω—É—Ç.

    ---

    #### üîã –ù–∞—Å—ã—â–µ–Ω–Ω–æ—Å—Ç—å

    *   **–ß—Ç–æ —ç—Ç–æ?** –ù–∞—Å–∫–æ–ª—å–∫–æ ¬´–∑–∞–≥—Ä—É–∂–µ–Ω¬ª –≤–∞—à —Å–µ—Ä–≤–∏—Å. –≠—Ç–æ —Å–∞–º—ã–π —Å–ª–æ–∂–Ω—ã–π –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ –±–ª–∏–∑–∫–∞ —Å–∏—Å—Ç–µ–º–∞ –∫ –ø—Ä–µ–¥–µ–ª—É —Å–≤–æ–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
    *   **–ù–∞ —á—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å?** –ù–∞ —Ä–µ—Å—É—Ä—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã—Å—Ç—Ä–µ–µ –≤—Å–µ–≥–æ –∑–∞–∫–æ–Ω—á–∞—Ç—Å—è (CPU, –ø–∞–º—è—Ç—å, –¥–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤).
    *   **–ü—Ä–∏–º–µ—Ä –º–µ—Ç—Ä–∏–∫–∏:** `1 - avg_over_time(node_cpu_seconds_total{mode="idle"}[5m])` ‚Äî —É—Ç–∏–ª–∏–∑–∞—Ü–∏—è CPU (–¥–æ–ª—è –≤—Ä–µ–º–µ–Ω–∏, –∫–æ–≥–¥–∞ CPU –Ω–µ –ø—Ä–æ—Å—Ç–∞–∏–≤–∞–ª).

    !!! info "–ò—Å—Ç–æ—á–Ω–∏–∫"

        –ö–æ–Ω—Ü–µ–ø—Ü–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—Å–∞–Ω–∞ –≤ –∫–Ω–∏–≥–µ [**Google SRE Book**](https://sre.google/sre-book/service-level-objectives/).

---

## üì• –ú–æ–¥–µ–ª–∏ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

<figure markdown="span">
  ![push-vs-pull](../assets/monitoring/push-vs-pull.png){ width="500" }
  <figcaption>–†–∏—Å—É–Ω–æ–∫ 1. Pull vs Push</figcaption>
</figure>

| –ö—Ä–∏—Ç–µ—Ä–∏–π | Pull-–º–æ–¥–µ–ª—å (e.g., Prometheus) | Push-–º–æ–¥–µ–ª—å (e.g., Zabbix) |
| :--- | :--- | :--- |
| **–ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä —Å–≤—è–∑–∏** | –°–µ—Ä–≤–µ—Ä –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ | –ê–≥–µ–Ω—Ç –Ω–∞ —Ö–æ—Å—Ç–µ |
| **–°–µ—Ç–µ–≤–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å** | –°–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω "–≤–∏–¥–µ—Ç—å" –≤—Å–µ —Ü–µ–ª–∏. <br> *–°–ª–æ–∂–Ω–æ –∑–∞ NAT/Firewall.* | –ê–≥–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω "–≤–∏–¥–µ—Ç—å" —Å–µ—Ä–≤–µ—Ä. <br> *–û—Ç–ª–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∑–∞ NAT/Firewall.* |
| **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ü–µ–ª–µ–π** | –õ–µ–≥–∫–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç—Å—è (service discovery). | –¢—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π –∏–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–æ–≤. |
| **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∞–≥–µ–Ω—Ç–∞** | –ê–≥–µ–Ω—Ç –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ–π (—á–∞—Å—Ç–æ –ø—Ä–æ—Å—Ç–æ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä). | –ê–≥–µ–Ω—Ç —Å–ª–æ–∂–Ω–µ–µ (–ª–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏, –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è). |
| **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–∞–Ω–Ω—ã—Ö** | –°–µ—Ä–≤–µ—Ä –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç —á–∞—Å—Ç–æ—Ç—É –∏ –æ–±—ä—ë–º —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö. | –ê–≥–µ–Ω—Ç —Ä–µ—à–∞–µ—Ç, –∫–æ–≥–¥–∞ –∏ —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å. |

---

## TODO: –¢–∏–ø—ã –º–µ—Ç—Ä–∏–∫ (Counters, Gauges, Histograms)
